<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
  <title>SkillSculpt | Analiz Paneli</title>
  <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; font-family: 'Varela Round', sans-serif; }
    body { background: url('/frontend/images/background.png') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; color: #fff; }
    .circle { position: absolute; border-radius: 50%; opacity: 0.2; z-index: 0; animation: float 8s ease-in-out infinite; }
    .circle.blue { background-color: #00bcd4; width: 120px; height: 120px; top: 10%; left: 5%; }
    .circle.green { background-color: #8bc34a; width: 180px; height: 180px; bottom: 15%; right: 8%; }
    .circle.purple { background-color: #b39ddb; width: 90px; height: 90px; top: 50%; right: 15%; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-40px); } }
    .form-container { background-color: rgba(255, 255, 255, 0.9); padding: 40px; border-radius: 20px; width: 90%; max-width: 600px; color: #333; }
    h1 { text-align: center; color: #002244; font-size: 2.6rem; margin-bottom: 25px; }
    .result-box { margin-top: 30px; padding: 20px; border-radius: 15px; background-color: #f0f4f8; color: #333; font-size: 16px; }
    .result-box h3 { margin-top: 0; color: #004080; }
    .suggestion-box { margin-top: 20px; padding: 20px; border-radius: 15px; background-color: #e0f7fa; color: #004d40; }
    .suggestion-box h4 { margin-top: 0; color: #00796b; }
    .back-link { display: block; margin-top: 20px; text-align: center; color: #004080; text-decoration: none; font-weight: bold; }
    .back-link:hover { text-decoration: underline; }
  </style>
</head>
<body>
    <div class="circle blue"></div>
    <div class="circle green"></div>
    <div class="circle purple"></div>
    <div class="form-container">
      <h1>📊 Öğrenci Analizi Sonuçları</h1>

      <div class="result-box">
        <h3>📈 Risk Skoru: <span id="risk-score">...</span></h3>
        <p>Okuma Süresi: <span id="reading-time">...</span> saniye (Beklenen: <span id="expected-reading-time">...</span> saniye)</p>
        <p>Test Hataları: <span id="semantic-mistakes">...</span> adet</p>
      </div>

      <div class="suggestion-box">
        <h4>🧩 Öneri</h4>
        <p id="suggestion-text">...</p>
      </div>

      <a href="/" class="back-link">🏠 Ana Sayfaya Dön</a>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const results = JSON.parse(sessionStorage.getItem('analysisResult'));
        const suggestionTextEl = document.getElementById('suggestion-text');

        if (results) {
          document.getElementById('risk-score').textContent = `%${results.risk_score}`;
          document.getElementById('reading-time').textContent = results.reading_time;
          document.getElementById('expected-reading-time').textContent = results.expected_reading_time;
          document.getElementById('semantic-mistakes').textContent = results.semantic_mistakes;
          
          
          const score = results.risk_score;
          if (score >= 70) {
            suggestionTextEl.textContent = "Yüksek risk gözlemlendi. Özellikle okuma hızı ve sıralama becerilerinde zorluklar mevcut. Sesli okuma egzersizleri ve heceleme oyunları gibi daha yoğunlaştırılmış çalışmalar önerilir. Bir uzmandan destek alınması faydalı olabilir.";
          } else if (score >= 40) {
            suggestionTextEl.textContent = "Orta düzeyde risk tespit edildi. Öğrencinin dikkat ve sıralama becerilerini geliştirmek için görsel destekli materyaller (renkli kartlar, resimli hikayeler) ve harf ayrıştırma egzersizleri faydalı olacaktır.";
          } else {
            suggestionTextEl.textContent = "Düşük risk seviyesi. Öğrencinin görev performansı genel olarak beklentiler dahilindedir. Öğrencinin motivasyonunu yüksek tutmak ve okuma alışkanlığını teşvik etmek için olumlu geri bildirim önemlidir.";
          }
          

        } else {
          document.querySelector('.form-container').innerHTML = '<h1>Analiz sonucu bulunamadı.</h1><a href="/task" class="back-link">🧠 Görevleri Çözmeye Geri Dön</a>';
        }
      });
    </script>
</body>
</html>